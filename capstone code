import time

# Path to the hosts file (Windows example; change for Mac/Linux)
hosts_path = r"C:\Windows\System32\drivers\etc\hosts"

# Redirect to localhost
redirect = "127.0.0.1"

# List of websites to block
blocked_sites = ["www.youtube.com", "youtube.com", "www.instagram.com", "instagram.com"]

# Get focus duration from the user (in minutes)
while True:
    try:
        minutes = int(input("Enter focus duration in minutes: "))
        if minutes <= 0:
            print("Please enter a positive number.")
            continue
        break
    except ValueError:
        print("Invalid input. Please enter an integer value.")

# Convert minutes to seconds
study_time = minutes * 60

print(f"Focus mode ON for {minutes} minute(s)! Websites will be blocked during this session.")
start = time.time()

while time.time() - start < study_time:
    with open(hosts_path, "r+") as file:
        content = file.read()
        for site in blocked_sites:
            if site not in content:
                file.write(f"\n{redirect} {site}")
    print("Blocking distracting sites...")
    time.sleep(10)  # Check every 10 seconds

# After time ends â€” unblocking websites
with open(hosts_path, "r+") as file:
    lines = file.readlines()
    file.seek(0)
    for line in lines:
        if not any(site in line for site in blocked_sites):
            file.write(line)
    file.truncate()

print("Focus session over! Websites are unblocked now.")
